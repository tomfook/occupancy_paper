---
title: "研究計画書"
author:
  name: "福本 知也"
date: "2024-02-19"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## 研究名
不確実性のある環境下で、入る形に複雑な制約があるオンラインパッキング問題。
またその不確実性を条件付きで制御できる場合の最適化問題。

## 背景
人が次々にやってきて、それらに座席を提供する。
座席には列があり、一つの列に座れる人数に制限がある。
人はグループでやってくる。
同じグループの人には同一の列で連結した席を提供しなければならない。
人がやってきた順番に席を提供しなければならない。
次にやってくるグループの大きさを知ることはできない。統計的に定まるものとする。

空席をできる限り少なくして多くの人に座席を提供したい。

### 背景の具体的なイメージ
遊園地のジェットコースターで座席を提供する戦略

## 問題
問題は２つある。

1つ目の問題はある空席状態に対してあるグループサイズがやってきたときに、どの列を着席する列として指定するかという戦略を定めることである。
戦略から期待される満席率(期待着席数/提供席数)を評価し、最も期待される満席率が高い戦略を採用したい。

2つ目の問題は事前にグループサイズを振り分けられるとすれば、どのようなルールが満席率を最も高めるかを決定することである。
同じ設備が複数ある場合、入口の前にグループサイズからどちらの設備へ案内するかを事前にふるい分けることができる。
つまり制限付きでやってくるグループの不確実性を減少させることができる。
そのときどのようなパターンでふるい分けるのが満席率を高めるかを決定したい。
この問題は１つ目の問題が解決した後でなければ解くことができない。

どちらも問題としては一つの列に座れる人数とグループサイズの統計が入力となり、出力として満席率がありこれを最も高くする行動戦略を決定するものである。
またグループサイズの統計は固定的なものでないため戦略はグループサイズの統計に関してロバスト性を持つのが望ましい。
また季節や時間の流れによっても変化するため、環境の変化に追従するよう戦略を変更するメタ戦略も見つけたい。

## 事前研究
グループサイズの統計が独立同一な多項分布で座席の列が一列しかない場合は、単純なマルコフ過程で期待満席率を計算することができる。
なぜならばやってくるグループをどの列に着席させるかという自由度が存在しないためである。
この場合は第１の問題は満席率の計算のみになる。
マルコフ過程の状態数は一列の席数+1で、これらの遷移確率がやってくるグループサイズの統計によって定まる。
満席率の計算ができれば第２の問題も解決することができる。

一列の席数が２の場合は簡単に解ける。
また一列あたり席数４の場合（現実に存在する条件）ではグループサイズの統計に制限を付けて解くことができた。

## 研究方針
列数が２以上の場合は、どの列に案内するかの自由度が存在するためマルコフ過程で期待満席率を計算できない。

グループサイズの統計を独立同一な多項分布とすれば動的計画法で最適解を見つけることができる見込みがある。
ただし実際に運用できるためには戦略はある程度シンプルである必要がある。
どうやってシンプルな解を見つけるか、そもそもシンプルさの制約をどのように入れるかが課題になる。

またグループサイズの統計は実績から推測するだけなので正確な情報は得られないと考えるべきである。
すなわち戦略は最適であるだけでなくグループサイズの統計に対してロバストであることが望ましい。
解のロバスト性をどうやって評価すれば良いだろうか。

これらは条件を変更させながら動的計画法のシミュレーションを大量に実行して検討をつけることができるかもしれない。
しかしシミュレーションを回していない条件については情報が無いことになるので、なにかしらの理論的な解析もしたいが、まだ検討はついていない。

また環境の変化に追従するメタ戦略は強化学習による解析が当てはまるかもしれない。
